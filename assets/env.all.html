<!doctype html>
<html>
  <head>
      <script src="https://cdn.jsdelivr.net/pyodide/v0.28.2/full/pyodide.js"></script>
  </head>
  <body>
    <div id="msg">Loading...</div>
    <script type="text/javascript">
      async function main() {
        console.log("main enter");

        const pyodide = await loadPyodide();
        console.log("pyodide", pyodide);

        const micropip = await pyodide.loadPackage("micropip");
        //const micropip = pyodide.pyimport("micropip");
        console.log("micropip", micropip);

        let result = await pyodide.runPythonAsync(`
          print("enter pyodide.runPython")
          print(f"__package__", __package__)
          print(f"__name__", __name__)

          import sys
          print('sys.executable', sys.executable) # 'C:\\Python313\\python.exe'
          print('sys.version', sys.version) # sys.version 3.13.4 (tags/v3.13.4:8a526ec, Jun  3 2025, 17:46:04) [MSC v.1943 64 bit (AMD64)]
          print('sys.byteorder', sys.byteorder) # 'littleorder'
          print('sys.version', sys.version)
          print('sys.version_info', sys.version_info)
          print(f"modules {len(sys.modules)}:")
          print("modules:", sorted(sys.modules.keys()))

          import platform
          print('architecture', platform.architecture()) # ('64bit', 'WindowsPE')
          print('machine', platform.machine()) # AMD64
          print('node', platform.node()) # G15 (system name)
          print('platform', platform.platform()) # 'Windows-11-10.0.26100-SP0'
          print('processor', platform.processor()) # 'Intel64 Family 6 Model 154 Stepping 3, GenuineIntel'
          print('python_branch', platform.python_branch()) # 'tags/v3.13.4'
          print('python_build', platform.python_build()) # ('tags/v3.13.4:8a526ec', 'Jun  3 2025 17:46:04')
          print('python_compiler', platform.python_compiler()) # 'MSC v.1943 64 bit (AMD64)'
          print('python_implementation', platform.python_implementation()) # 'CPython'
          print('python_version', platform.python_version()) # '3.13.4'
          print('system', platform.system()) # 'Windows'
          print('version', platform.version()) # '10.0.26100' (OS version)
          print('uname', platform.uname()) # uname_result(system='Windows', node='G15', release='11', version='10.0.26100', machine='AMD64')
          print('win32_ver', platform.win32_ver()) # ('11', '10.0.26100', 'SP0', 'Multiprocessor Free')

          import sysconfig
          print('sysconfig vars', sysconfig.get_config_vars())
          print('sysconfig platform', sysconfig.get_platform())

          #import subprocess
          #subprocess.run([sys.executable, '-m', 'sysconfig'])

          import micropip
          micropip.list()
          pydantic = await micropip.install('pydantic')
          micropip.list()

          pydantic = await micropip.install('pydantic')
          mypy = await micropip.install('mypy')
          pytest = await micropip.install('pytest')
          flake8 = await micropip.install('flake8')
          pyyaml = await micropip.install('pyyaml')
          jiter = await micropip.install('jiter')
          cryptography = await micropip.install('cryptography')
          charset_normalizer = await micropip.install('charset_normalizer')
          python_dateutil = await micropip.install('python_dateutil')

          #markdown = await micropip.install('markdown')
          markdown_it = await micropip.install('markdown_it_py')
          #mkdocs_material = await micropip.install('mkdocs_material')
          jupytext = await micropip.install('jupytext')
          # Unsupported: jupyter = await micropip.install('jupyter')
          # Unsupported: nbdev = await micropip.install('nbdev')

          numpy = await micropip.install('numpy')
          scipy = await micropip.install('scipy')
          matplotlib = await micropip.install('matplotlib')
          scikit_learn = await micropip.install('scikit_learn')
          pandas = await micropip.install('pandas')
          nltk = await micropip.install('nltk')

          langchain = await micropip.install('langchain')
          # Unsupported: langgraph = await micropip.install('langgraph')
          # Unsupported: langmem = await micropip.install('langmem')

          openai = await micropip.install('openai')
          # Unsupported: agents = await micropip.install('openai_agents')
          # Unsupported: openai_harmony = await micropip.install('openai_harmony')
          # Unsupported: gpt_oss = await micropip.install('gpt_oss') # ["pandas", "numpy", "openai", "jinja2", "tqdm", "blobfile"]

          anthropic = await micropip.install('anthropic')
          # Unsupported: claude_code = await micropip.install('claude_code_sdk')
          # Old name: claude = await micropip.install('claude')
          # Old name: claude_sdk = await micropip.install('claude_sdk')
          # Old name: claude_code = await micropip.install('claude_code')

          llm = await micropip.install('llm')
          # Unsupported: llama_index = await micropip.install('llama_index')
          lmstudio = await micropip.install('lmstudio')
          ollama = await micropip.install('ollama')

          # Unsupported: tensorflow = await micropip.install("tensorflow")
          # Unsupported: torch = await micropip.install("torch", index_urls=["https://download.pytorch.org/whl/cpu"])
          # Unsupported: keras = await micropip.install('keras')
          # Unsupported: transformers = await micropip.install('transformers')
          # Unsupported: sentence_transformers = await micropip.install('sentence_transformers')

          # Unsupported: crewai = await micropip.install('crewai')
          # Unsupported: strands = await micropip.install('strands')
          autogen = await micropip.install('autogen')
          smolagents = await micropip.install('smolagents')

          openapi = await micropip.install('openapi')
          fastapi = await micropip.install('fastapi')
          fastcore = await micropip.install('fastcore')
          # Unsupported: fastmcp = await micropip.install('fastmcp', reinstall=True)
          # Unsupported: fastai = await micropip.install('fastai')

          lxml = await micropip.install('lxml')
          html5lib = await micropip.install('html5lib')
          requests = await micropip.install('requests')
          urllib3 = await micropip.install('urllib3')
          certifi = await micropip.install('certifi')
          websockets = await micropip.install('websockets')
          websocket = await micropip.install('websocket_client')

          jinja2 = await micropip.install('jinja2')
          django = await micropip.install('django')
          flask = await micropip.install('flask')
          gunicorn = await micropip.install('gunicorn')

          behave = await micropip.install('behave')
          selenium = await micropip.install('selenium')
          beautifulsoup4 = await micropip.install('beautifulsoup4')
          # Unsupported: scrapy = await micropip.install('scrapy')
          # Unsupported: playwright = await micropip.install('playwright')

          tqdm = await micropip.install('tqdm')
          # Unsupported: blobfile = await micropip.install('blobfile')
          sqlite3 = await micropip.install('sqlite3')
          fsspec = await micropip.install('fsspec')

          print("leave pyodide.runPython")
        `);

        console.log("main exit", result);
      }

      main();
    </script>
  </body>
</html>
